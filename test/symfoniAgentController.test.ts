import assert from 'assert';
import { describe, it } from 'mocha';
import { SymfoniAgentController } from '../src/controllers/SymfoniAgentController';

const symfoniAgentController = new SymfoniAgentController('symfoni');
const validPresentationToken = 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QifQ.eyJ2cCI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVQcmVzZW50YXRpb24iXSwidmVyaWZpYWJsZUNyZWRlbnRpYWwiOlsiZXlKaGJHY2lPaUpGVXpJMU5rc2lMQ0owZVhBaU9pSktWMVFpZlEuZXlKMll5STZleUpBWTI5dWRHVjRkQ0k2V3lKb2RIUndjem92TDNkM2R5NTNNeTV2Y21jdk1qQXhPQzlqY21Wa1pXNTBhV0ZzY3k5Mk1TSXNJbWgwZEhCek9pOHZjbUYzTG1kcGRHaDFZblZ6WlhKamIyNTBaVzUwTG1OdmJTOXplVzFtYjI1cEwySmhZMmhsYkc5eUwyUmxkaTl6WTJobGJXRnpMM1JsYlhCS1UwOU9MM0JsY25OdmJsTmphR1Z0WVM1cWMyOXVJbDBzSW5SNWNHVWlPbHNpVm1WeWFXWnBZV0pzWlVOeVpXUmxiblJwWVd3aUxDSlFaWEp6YjI1V1F5SmRMQ0pqY21Wa1pXNTBhV0ZzVTNWaWFtVmpkQ0k2ZXlKd1pYSnpiMjRpT25zaVpHRjBaVTltUkdWaGRHZ2lPaUl5TURJd0xUQXhMVEF4VkRFNU9qSXpPakkwV2lJc0ltTnZkVzUwY25sUFprUmxZWFJvSWpvaVRrOGlMQ0p3YkdGalpVOW1SR1ZoZEdnaU9pSkhhc080ZG1scklpd2lZMjkxYm5SeWVVOW1RbWx5ZEdnaU9pSk9UeUlzSW5Cc1lXTmxUMlpDYVhKMGFDSTZJa0ZrWkhKbGMzTmxkbVZuWlc0Z01qSWlMQ0prWVhSbFQyWkNhWEowYUNJNklqSXdNVEF0TURFdE1ERlVNVGs2TWpNNk1qUmFJaXdpWjJWdVpHVnlJam9pYldGc1pTSXNJbTVoYldVaU9uc2liR0Z6ZEU1aGJXVWlPaUpUZDJWa2FYTm9iV0Z1SWl3aVptbHljM1JPWVcxbElqb2lUMnhoSWl3aWJXbGtaR3hsVG1GdFpTSTZJa2R5YjIxd0luMHNJbTl5YVdkcGJtRnNUbUZ0WlNJNklrOXNZU0JPYjNKdFlXNXVJaXdpYldGeWFYUmhiRk4wWVhSMWN5STZJblZ1YldGeWNtbGxaQ0lzSW1OcGRHbDZaVzV6YUdsd0lqb2lWVk1pTENKaFpHUnlaWE56SWpwN0ltTnZkVzUwY25sRGIyUmxJam9pVGs4aUxDSmphWFI1SWpvaVoyckR1SFpwYXlJc0lucHBjRU52WkdVaU9qRXlNVElzSW5OMGNtVmxkRTVoYldVaU9pSjJaV2xuWVhSbGJpSXNJbk4wY21WbGRFNTFiV0psY2lJNk1USjlmWDE5TENKemRXSWlPaUprYVdRNlpYUm9janB5YVc1clpXSjVPakI0TURJd05tSmpNbVEzTVRrM01qRTFNVGxtWkRkbE1HRmpOVGd5TWpRMk9EaGxNV00xWTJNNVltVTFZMll6Wm1NMk4yVmpOR1k1TXpka1lqazFPRFZsWldZMklpd2libUptSWpveE5qUTVOalk0TkRZNExDSnBjM01pT2lKa2FXUTZaWFJvY2pweWFXNXJaV0o1T2pCNE1ESm1NVEkxT1RZM09UVmxNVFkxWTJKbU1qaGlZVGxoWmpZeE5URTNOMk0xTlRFMVpURTRaR0l4TldOaVl6SmlZV1ZoTjJGbFlXVXlNekJsWWpCbU5qQTVJbjAuUGhTOWU0ZUNoRVEtNExRdFVTbXVYempjTjZoRjdjT3NDYnYxR0lKbk1HdWtORGtjMVp4TDVPejl5U0ZkMlpRMG1Cc2NfaFA4UGtvRjlpMmlzUDJGT0EiXX0sIm5iZiI6MTY0OTk1MDk0OSwiaXNzIjoiZGlkOmV0aHI6cmlua2VieToweDAzNDdhZGFiMTRhMGM2YTc0MDBmODZjMmU5MGMyZTg5ZmNmMTUyYTJiNzczOWJjMzA5ZWE3ZjgzNGYxN2I0YjU5YiJ9.xDO6RFHNEHlIhYPJegmrSn2-LxmlNxbBrZnjziTzkQglsj6a-t4acV7t850s3n1FIcoPDybXj4verMMedErv3g';
const badPresentationToken = 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QifQ.eyJ2I6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVQcmVzZW50YXRpb24iXSwidmVyaWZpYWJsZUNyZWRlbnRpYWwiOlsiZXlKaGJHY2lPaUpGVXpJMU5rc2lMQ0owZVhBaU9pSktWMVFpZlEuZXlKMll5STZleUpBWTI5dWRHVjRkQ0k2V3lKb2RIUndjem92TDNkM2R5NTNNeTV2Y21jdk1qQXhPQzlqY21Wa1pXNTBhV0ZzY3k5Mk1TSXNJbWgwZEhCek9pOHZjbUYzTG1kcGRHaDFZblZ6WlhKamIyNTBaVzUwTG1OdmJTOXplVzFtYjI1cEwySmhZMmhsYkc5eUwyUmxkaTl6WTJobGJXRnpMM1JsYlhCS1UwOU9MM0JsY25OdmJsTmphR1Z0WVM1cWMyOXVJbDBzSW5SNWNHVWlPbHNpVm1WeWFXWnBZV0pzWlVOeVpXUmxiblJwWVd3aUxDSlFaWEp6YjI1V1F5SmRMQ0pqY21Wa1pXNTBhV0ZzVTNWaWFtVmpkQ0k2ZXlKd1pYSnpiMjRpT25zaVpHRjBaVTltUkdWaGRHZ2lPaUl5TURJd0xUQXhMVEF4VkRFNU9qSXpPakkwV2lJc0ltTnZkVzUwY25sUFprUmxZWFJvSWpvaVRrOGlMQ0p3YkdGalpVOW1SR1ZoZEdnaU9pSkhhc080ZG1scklpd2lZMjkxYm5SeWVVOW1RbWx5ZEdnaU9pSk9UeUlzSW5Cc1lXTmxUMlpDYVhKMGFDSTZJa0ZrWkhKbGMzTmxkbVZuWlc0Z01qSWlMQ0prWVhSbFQyWkNhWEowYUNJNklqSXdNVEF0TURFdE1ERlVNVGs2TWpNNk1qUmFJaXdpWjJWdVpHVnlJam9pYldGc1pTSXNJbTVoYldVaU9uc2liR0Z6ZEU1aGJXVWlPaUpUZDJWa2FYTm9iV0Z1SWl3aVptbHljM1JPWVcxbElqb2lUMnhoSWl3aWJXbGtaR3hsVG1GdFpTSTZJa2R5YjIxd0luMHNJbTl5YVdkcGJtRnNUbUZ0WlNJNklrOXNZU0JPYjNKdFlXNXVJaXdpYldGeWFYUmhiRk4wWVhSMWN5STZJblZ1YldGeWNtbGxaQ0lzSW1OcGRHbDZaVzV6YUdsd0lqb2lWVk1pTENKaFpHUnlaWE56SWpwN0ltTnZkVzUwY25sRGIyUmxJam9pVGs4aUxDSmphWFI1SWpvaVoyckR1SFpwYXlJc0lucHBjRU52WkdVaU9qRXlNVElzSW5OMGNtVmxkRTVoYldVaU9pSjJaV2xuWVhSbGJpSXNJbk4wY21WbGRFNTFiV0psY2lJNk1USjlmWDE5TENKemRXSWlPaUprYVdRNlpYUm9janB5YVc1clpXSjVPakI0TURJd05tSmpNbVEzTVRrM01qRTFNVGxtWkRkbE1HRmpOVGd5TWpRMk9EaGxNV00xWTJNNVltVTFZMll6Wm1NMk4yVmpOR1k1TXpka1lqazFPRFZsWldZMklpd2libUptSWpveE5qUTVOalk0TkRZNExDSnBjM01pT2lKa2FXUTZaWFJvY2pweWFXNXJaV0o1T2pCNE1ESm1NVEkxT1RZM09UVmxNVFkxWTJKbU1qaGlZVGxoWmpZeE5URTNOMk0xTlRFMVpURTRaR0l4TldOaVl6SmlZV1ZoTjJGbFlXVXlNekJsWWpCbU5qQTVJbjAuUGhTOWU0ZUNoRVEtNExRdFVTbXVYempjTjZoRjdjT3NDYnYxR0lKbk1HdWtORGtjMVp4TDVPejl5U0ZkMlpRMG1Cc2NfaFA4UGtvRjlpMmlzUDJGT0EiXX0sIm5iZiI6MTY0OTk1MTcxNiwiaXNzIjoiZGlkOmV0aHI6cmlua2VieToweDAzNDdhZGFiMTRhMGM2YTc0MDBmODZjMmU5MGMyZTg5ZmNmMTUyYTJiNzczOWJjMzA5ZWE3ZjgzNGYxN2I0YjU5YiJ9.ybiD6sHWqo0YsUQe4z6B0F62h4c8n63b_mMBhSwt_37DZ348Zhmk-Ul4JLLuZQePJNsCuuRjGXTpy8XO_Bg-2Q';

describe('SymfoniAgentController', function () {
	describe('the isQualifiedForContractVCs function', async () => {
		it('should return true if the token is valid', async ()=>{
			const result = await symfoniAgentController.isQualifiedForContractVCs(validPresentationToken);
			assert.equal(result, true);
		});

		it('should not return true if the token is broken', async ()=>{
			const result = await symfoniAgentController.isQualifiedForContractVCs(badPresentationToken);
			assert.notEqual(result, true);
		});
	});
});