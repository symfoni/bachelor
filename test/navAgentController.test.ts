import { it, describe } from 'mocha';
import { NAVAgentController } from '../src/controllers/NAVAgentController';
import assert from 'assert';

const validPresentationToken = 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QifQ.eyJ2cCI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVQcmVzZW50YXRpb24iXSwidmVyaWZpYWJsZUNyZWRlbnRpYWwiOlsiZXlKaGJHY2lPaUpGVXpJMU5rc2lMQ0owZVhBaU9pSktWMVFpZlEuZXlKMll5STZleUpBWTI5dWRHVjRkQ0k2V3lKb2RIUndjem92TDNkM2R5NTNNeTV2Y21jdk1qQXhPQzlqY21Wa1pXNTBhV0ZzY3k5Mk1TSXNJbWgwZEhCek9pOHZjbUYzTG1kcGRHaDFZblZ6WlhKamIyNTBaVzUwTG1OdmJTOXplVzFtYjI1cEwySmhZMmhsYkc5eUwyUmxkaTl6WTJobGJXRnpMM1JsYlhCS1UwOU9MMkoxYzJsdVpYTnpVMk5vWlcxaExtcHpiMjRpWFN3aWRIbHdaU0k2V3lKV1pYSnBabWxoWW14bFEzSmxaR1Z1ZEdsaGJDSXNJa0oxYzJsdVpYTnpWa01pWFN3aVkzSmxaR1Z1ZEdsaGJGTjFZbXBsWTNRaU9uc2lZblZ6YVc1bGMzTWlPbnNpYm1GdFpTSTZJbTVoYldVaUxDSnBibVIxYzNSeWFXRnNRMjlrWlNJNklqRXlTMG9pTENKdmNtZGhibWx6WVhScGIyNVRkSEoxWTNSMWNtVWlPaUpCVXlJc0ltOXlaMkZ1YVhOaGRHbHZiazUxYldKbGNpSTZNVElzSW1Ga1pISmxjM01pT25zaVkyOTFiblJ5ZVVOdlpHVWlPaUpPVHlJc0ltTnBkSGtpT2lKSGFzTzRkbWxySWl3aWVtbHdRMjlrWlNJNk1qZ3lOeXdpYzNSeVpXVjBUbUZ0WlNJNkltZGhkR1YyWldsbGJpSXNJbk4wY21WbGRFNTFiV0psY2lJNk1qSXNJbVpzYjI5eUlqb2lNa0VpZlgxOWZTd2ljM1ZpSWpvaVpHbGtPbVYwYUhJNmNtbHVhMlZpZVRvd2VEQXlNRFppWXpKa056RTVOekl4TlRFNVptUTNaVEJoWXpVNE1qSTBOamc0WlRGak5XTmpPV0psTldObU0yWmpOamRsWXpSbU9UTTNaR0k1TlRnMVpXVm1OaUlzSW01aVppSTZNVFkwT0Rnd01UYzRNaXdpYVhOeklqb2laR2xrT21WMGFISTZjbWx1YTJWaWVUb3dlREF5WmpFeU5UazJOemsxWlRFMk5XTmlaakk0WW1FNVlXWTJNVFV4Tnpkak5UVXhOV1V4T0dSaU1UVmpZbU15WW1GbFlUZGhaV0ZsTWpNd1pXSXdaall3T1NKOS55TkpGaXl3RzhmV002VzhRZWlhOVBTWlhYem5mMWphQnpJb0NKS3IwV0tPQ204c0hZRUZMQmxkYmxKNlJXeXlOS0dyRW9pMlRiTE15dmxGSmF3Zmw2ZyIsImV5SmhiR2NpT2lKRlV6STFOa3NpTENKMGVYQWlPaUpLVjFRaWZRLmV5SjJZeUk2ZXlKQVkyOXVkR1Y0ZENJNld5Sm9kSFJ3Y3pvdkwzZDNkeTUzTXk1dmNtY3ZNakF4T0M5amNtVmtaVzUwYVdGc2N5OTJNU0lzSW1oMGRIQnpPaTh2Y21GM0xtZHBkR2gxWW5WelpYSmpiMjUwWlc1MExtTnZiUzl6ZVcxbWIyNXBMMkpoWTJobGJHOXlMMlJsZGk5elkyaGxiV0Z6TDNSbGNtMXBibUYwYVc5dVUyTm9aVzFoTG1wemIyNGlYU3dpZEhsd1pTSTZXeUpXWlhKcFptbGhZbXhsUTNKbFpHVnVkR2xoYkNJc0lsUmxjbTFwYm1GMGFXOXVWa01pWFN3aVkzSmxaR1Z1ZEdsaGJGTjFZbXBsWTNRaU9uc2lkR1Z5YldsdVlYUnBiMjRpT25zaVpXMXdiRzk1WldVaU9uc2liR0Z6ZEVSaGVVRjBWMjl5YXlJNklqSXdNakV0TURJdE1ESWlMQ0pzWVhOMFVHRjVaR0Y1SWpvaU1qQXlNUzB3TWkwd01pSXNJblJsY20xcGJtRjBhVzl1VTNSaGRIVnpJam9pY21WemFXZHVaV1FpTENKMFpYSnRhVzVoZEdWa1JIVnlhVzVuVkhKcFlXeFFaWEpwYjJRaU9uUnlkV1VzSWxkbFpXdHNlVmR2Y210SWIzVnljeUk2TWpJc0luUmxjbTFwYm1GMGFXOXVUbTkwYVdObFVtVmpaV2wyWldRaU9pSXlNREl4TFRBeUxUQXlJbjBzSW1OdmJuUnlZV04wVUVSR0lqcDdJbFZTVENJNkltaDBkSEJ6T2k4dmNHUm1jeTVqYjIwdmNHUm1NQzV3WkdZaUxDSm9ZWE5vSWpvaU9EYzBNMkkxTWpBMk0yTmtPRFF3T1RkaE5qVmtNVFl6TTJZMVl6YzBaalVpZlgxOWZTd2ljM1ZpSWpvaVpHbGtPbVYwYUhJNmNtbHVhMlZpZVRvd2VEQXlNRFppWXpKa056RTVOekl4TlRFNVptUTNaVEJoWXpVNE1qSTBOamc0WlRGak5XTmpPV0psTldObU0yWmpOamRsWXpSbU9UTTNaR0k1TlRnMVpXVm1OaUlzSW01aVppSTZNVFkwT1RFNU5EazNPQ3dpYVhOeklqb2laR2xrT21WMGFISTZjbWx1YTJWaWVUb3dlREF6TURCalpEQmtabUU1WmpCaU5UYzJORGMwTTJZeE0yWXlNVGczTVRJMk1tWXpPRFV3TmpRM1pUaGxNR1l3TVROaVl6RXdaakZoTkRBd016WXhOV1UyWVNKOS51T3BCRm1WX1RZQjYwWlBib0M2bmEyemFCMERsSW4wSTV1cEVsLVlDcHVINnFpdXZseTRNNjNtTl9ESG1MWDBaeF9CQWdmWnpmbWtNZERDSXM5SVVmQSJdfSwibmJmIjoxNjQ5NzY5MDU4LCJpc3MiOiJkaWQ6ZXRocjpyaW5rZWJ5OjB4MDM0N2FkYWIxNGEwYzZhNzQwMGY4NmMyZTkwYzJlODlmY2YxNTJhMmI3NzM5YmMzMDllYTdmODM0ZjE3YjRiNTliIn0.Qs7fKz_9IP8uREmLwdHU0dap40gXh46Fm7m4zBP5M-aELpv1STA3GyNx3zMW8O38Ix9prJaTWfM35KH_LRtjDQ';
const notValidPresentationToken = 'eyJhbGciOiJFUzI1NksiLCJ0eAiOiJKV1QifQ.eyJ2cCI6eyJAY29udGV4dCI6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSJdLCJ0eXBlIjpbIlZlcmlmaWFibGVQcmVzZW50YXRpb24iXSwidmVyaWZpYWJsZUNyZWRlbnRpYWwiOlsiZXlKaGJHY2lPaUpGVXpJMU5rc2lMQ0owZVhBaU9pSktWMVFpZlEuZXlKMll5STZleUpBWTI5dWRHVjRkQ0k2V3lKb2RIUndjem92TDNkM2R5NTNNeTV2Y21jdk1qQXhPQzlqY21Wa1pXNTBhV0ZzY3k5Mk1TSXNJbWgwZEhCek9pOHZjbUYzTG1kcGRHaDFZblZ6WlhKamIyNTBaVzUwTG1OdmJTOXplVzFtYjI1cEwySmhZMmhsYkc5eUwyUmxkaTl6WTJobGJXRnpMM1JsYlhCS1UwOU9MMkoxYzJsdVpYTnpVMk5vWlcxaExtcHpiMjRpWFN3aWRIbHdaU0k2V3lKV1pYSnBabWxoWW14bFEzSmxaR1Z1ZEdsaGJDSXNJa0oxYzJsdVpYTnpWa01pWFN3aVkzSmxaR1Z1ZEdsaGJGTjFZbXBsWTNRaU9uc2lZblZ6YVc1bGMzTWlPbnNpYm1GdFpTSTZJbTVoYldVaUxDSnBibVIxYzNSeWFXRnNRMjlrWlNJNklqRXlTMG9pTENKdmNtZGhibWx6WVhScGIyNVRkSEoxWTNSMWNtVWlPaUpCVXlJc0ltOXlaMkZ1YVhOaGRHbHZiazUxYldKbGNpSTZNVElzSW1Ga1pISmxjM01pT25zaVkyOTFiblJ5ZVVOdlpHVWlPaUpPVHlJc0ltTnBkSGtpT2lKSGFzTzRkbWxySWl3aWVtbHdRMjlrWlNJNk1qZ3lOeXdpYzNSeVpXVjBUbUZ0WlNJNkltZGhkR1YyWldsbGJpSXNJbk4wY21WbGRFNTFiV0psY2lJNk1qSXNJbVpzYjI5eUlqb2lNa0VpZlgxOWZTd2ljM1ZpSWpvaVpHbGtPbVYwYUhJNmNtbHVhMlZpZVRvd2VEQXlNRFppWXpKa056RTVOekl4TlRFNVptUTNaVEJoWXpVNE1qSTBOamc0WlRGak5XTmpPV0psTldObU0yWmpOamRsWXpSbU9UTTNaR0k1TlRnMVpXVm1OaUlzSW01aVppSTZNVFkwT0Rnd01UYzRNaXdpYVhOeklqb2laR2xrT21WMGFISTZjbWx1YTJWaWVUb3dlREF5WmpFeU5UazJOemsxWlRFMk5XTmlaakk0WW1FNVlXWTJNVFV4Tnpkak5UVXhOV1V4T0dSaU1UVmpZbU15WW1GbFlUZGhaV0ZsTWpNd1pXSXdaall3T1NKOS55TkpGaXl3RzhmV002VzhRZWlhOVBTWlhYem5mMWphQnpJb0NKS3IwV0tPQ204c0hZRUZMQmxkYmxKNlJXeXlOS0dyRW9pMlRiTE15dmxGSmF3Zmw2ZyIsImV5SmhiR2NpT2lKRlV6STFOa3NpTENKMGVYQWlPaUpLVjFRaWZRLmV5SjJZeUk2ZXlKQVkyOXVkR1Y0ZENJNld5Sm9kSFJ3Y3pvdkwzZDNkeTUzTXk1dmNtY3ZNakF4T0M5amNtVmtaVzUwYVdGc2N5OTJNU0lzSW1oMGRIQnpPaTh2Y21GM0xtZHBkR2gxWW5WelpYSmpiMjUwWlc1MExtTnZiUzl6ZVcxbWIyNXBMMkpoWTJobGJHOXlMMlJsZGk5elkyaGxiV0Z6TDNSbGNtMXBibUYwYVc5dVUyTm9aVzFoTG1wemIyNGlYU3dpZEhsd1pTSTZXeUpXWlhKcFptbGhZbXhsUTNKbFpHVnVkR2xoYkNJc0lsUmxjbTFwYm1GMGFXOXVWa01pWFN3aVkzSmxaR1Z1ZEdsaGJGTjFZbXBsWTNRaU9uc2lkR1Z5YldsdVlYUnBiMjRpT25zaVpXMXdiRzk1WldVaU9uc2liR0Z6ZEVSaGVVRjBWMjl5YXlJNklqSXdNakV0TURJdE1ESWlMQ0pzWVhOMFVHRjVaR0Y1SWpvaU1qQXlNUzB3TWkwd01pSXNJblJsY20xcGJtRjBhVzl1VTNSaGRIVnpJam9pY21WemFXZHVaV1FpTENKMFpYSnRhVzVoZEdWa1JIVnlhVzVuVkhKcFlXeFFaWEpwYjJRaU9uUnlkV1VzSWxkbFpXdHNlVmR2Y210SWIzVnljeUk2TWpJc0luUmxjbTFwYm1GMGFXOXVUbTkwYVdObFVtVmpaV2wyWldRaU9pSXlNREl4TFRBeUxUQXlJbjBzSW1OdmJuUnlZV04wVUVSR0lqcDdJbFZTVENJNkltaDBkSEJ6T2k4dmNHUm1jeTVqYjIwdmNHUm1NQzV3WkdZaUxDSm9ZWE5vSWpvaU9EYzBNMkkxTWpBMk0yTmtPRFF3T1RkaE5qVmtNVFl6TTJZMVl6YzBaalVpZlgxOWZTd2ljM1ZpSWpvaVpHbGtPbVYwYUhJNmNtbHVhMlZpZVRvd2VEQXlNRFppWXpKa056RTVOekl4TlRFNVptUTNaVEJoWXpVNE1qSTBOamc0WlRGak5XTmpPV0psTldObU0yWmpOamRsWXpSbU9UTTNaR0k1TlRnMVpXVm1OaUlzSW01aVppSTZNVFkwT1RFNU5EazNPQ3dpYVhOeklqb2laR2xrT21WMGFISTZjbWx1YTJWaWVUb3dlREF6TURCalpEQmtabUU1WmpCaU5UYzJORGMwTTJZeE0yWXlNVGczTVRJMk1tWXpPRFV3TmpRM1pUaGxNR1l3TVROaVl6RXdaakZoTkRBd016WXhOV1UyWVNKOS51T3BCRm1WX1RZQjYwWlBib0M2bmEyemFCMERsSW4wSTV1cEVsLVlDcHVINnFpdXZseTRNNjNtTl9ESG1MWDBaeF9CQWdmWnpmbWtNZERDSXM5SVVmQSJdfSwibmJmIjoxNjQ5NzY5MDU4LCJpc3MiOiJkaWQ6ZXRocjpyaW5rZWJ5OjB4MDM0N2FkYWIxNGEwYzZhNzQwMGY4NmMyZTkwYzJlODlmY2YxNTJhMmI3NzM5YmMzMDllYTdmODM0ZjE3YjRiNTliIn0.Qs7fKz_9IP8uREmLwdHU0dap40gXh46Fm7m4zBP5M-aELpv1STA3GyNx3zMW8O38Ix9prJaTWfM35KH_LRtjDQ';

const navAgentController = new NAVAgentController('nav');

describe('The NAV agent controller', async () => {
	describe('the qualifiesForUnemploymentBenefits function', async () => {
		it('should return true if the token is valid', async () => {
			const result = await navAgentController.qualifiesForUnemploymentBenefits(validPresentationToken);
			assert.equal(result, true);
		});

		it('should not return true if the token is invalid', async () => {
			const result = await navAgentController.qualifiesForUnemploymentBenefits(notValidPresentationToken);
			if (result instanceof Error){
				assert.ok;
			}
		});
	});
});